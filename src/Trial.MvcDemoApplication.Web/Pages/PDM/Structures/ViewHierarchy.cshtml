@page
@using Trial.MvcDemoApplication.Web.Pages.PDM.Structures
@model Trial.MvcDemoApplication.Web.Pages.PDM.Structures.ViewHierarchyModel
@using Trial.MvcDemoApplication.Localization
@using Microsoft.Extensions.Localization
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Modal;
@inject Volo.Abp.AspNetCore.Mvc.UI.Layout.IPageLayout PageLayout
@{
    PageLayout.Content.Title = L["PageHeaders:StructureHierarchy"];
    PageLayout.Content.BreadCrumb.Add(L["PageHeaders:Structures"], "/PDM/Structures");
    ViewData["isRootLevel"] = true;
    ViewData["structureId"] = @Model.Id;
}

@inject IStringLocalizer<MvcDemoApplicationResource> L
@section scripts
{
    <abp-script src="/Pages/PDM/Structures/Index.js" />
}
<link href="https://unpkg.com/treeflex/dist/css/treeflex.css" rel="stylesheet">
<abp-card background="Light" text-color="Dark" border="Success" class="mb-3">
    <abp-card-header>
        <abp-row>
            <abp-column size-md="_6">
                @L["PageHeaders:StructureHierarchy"]
            </abp-column>
            <abp-column size-md="_6" class="text-end">
                <abp-button id="previewHierarchy"
                            text="@L["Toggle Hierarchy View"].Value"
                            icon="eye"
                            abp-collapse-id="HierarchyView"
                            button-type="Success"
                            />
            </abp-column>
        </abp-row>
    </abp-card-header>
    <abp-card-body background="Light" text-color="Dark" border="Success" size-md="_1">
        @if (@Model.Structure != null)
        {
            <abp-accordion>
                <abp-list-group flush="true">
                    <partial name="ComponentPartial" model="@Model.Structure.RootComponent" />
                </abp-list-group>
            </abp-accordion>
        }
    </abp-card-body>
</abp-card>
<abp-collapse-body id="HierarchyView">
        @Html.Raw(ViewHierarchyModel.ConvertToHtmlTree(Model.Structure))
</abp-collapse-body>
